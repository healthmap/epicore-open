<div ng-include src="'header.html'"></div>

<div class="container main" >
<div class="row">
    <div class="col-xs-12 wbg" >
        <p>
            <site-header back="back"></site-header>
        </p>

        <h4>Request For information details</h4>
        <!-- REPLY FORM (for FETPS only who received the event) -->
        <div ng-show="!isOrganization && isAuthorizedFETP">
            <p>Do you have anything to contribute regarding this outbreak?</p>
            <a href="#/reply/{{id}}" class="nav-button">Yes, respond to this request</a>
            <span ng-if="changeStatusText == 'Close'">
                <a href ng-click="sendResponse({response_permission: '0'})" class="nav-button">No, not at this time</a>
            </span>
        </div>
        <!-- END REPLY FORM -->

        <!-- OWNER of event gets additional options to close event or send followup email -->
        <span ng-show="isAuthorizedToFollowup && eventsList.event_id">
            <span ng-if="changeStatusText == 'Close'">
                <a href="#/followup/{{id}}" class="nav-button">Send follow-up email to all Members</a>
            </span>
            <span>
                <a href="#/{{changeStatusType}}/{{id}}" class="nav-button" ng-click="checkStatus()" >{{changeStatusText}} request</a>
            </span>
            <span>
                <a href="#/request_edit/{{id}}" class="nav-button">Edit request </a>
            </span>
        </span>
        <!-- END CLOSE FORM (for owner of event) -->
    </div>
</div><!--row-->

<div class="row" ng-show="isAuthorizedFETP || (isOrganization && eventsList.event_id)">
    <div class="col-xs-12 wbg" >
        <!-- Show Event History Messages -->

        <div class="event-item" ng-repeat="history_item in eventsList.history">
            <!-- Original Event Request Message in same organization (Moderator or FETP)-->
            <div ng-if="(history_item.type == 'Event Request')">
                    <h4><b>Title:</b> {{history_item.title}}<br>
                        <b>Disease:</b> {{history_item.disease}}<br>
                        <b>Location:</b> {{history_item.location}}<br>
                        <b>Date:</b> {{history_item.date}}</h4>
            </div>
        </div>

        <div ng-include="'partials/messagehistory.html'" ng-init="closerfi=''"></div><br>

    </div>
</div><!--row-->

    <div class="row" ng-hide="(isAuthorizedFETP || (isOrganization && eventsList.event_id)) || isAuthorizedFETP == null || isOrganization == null">
    <!--<div class="row" ng-show="!isAuthorizedFETP && !isOrganization || !eventsList.event_id" >-->
        <div class="col-xs-12 wbg" >
            <p>You are not authorized to view this event.</p>
        </div>
    </div>

</div><!--container main-->



